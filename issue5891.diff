diff -r cded732515e0 trytond/trytond/modules/stock/move.py
--- a/trytond/trytond/modules/stock/move.py	Mon Jul 17 10:43:57 2017 +0200
+++ b/trytond/trytond/modules/stock/move.py	Mon Jul 17 10:45:44 2017 +0200
@@ -27,7 +27,7 @@
 }
 DEPENDS = ['state']
 LOCATION_DOMAIN = [
-    If(Eval('state').in_(['staging', 'draft']),
+    If(Eval('state').in_(['staging', 'draft', 'cancel']),
         ('type', 'not in', ['warehouse']),
         ('type', 'not in', ['warehouse', 'view'])),
     ]
