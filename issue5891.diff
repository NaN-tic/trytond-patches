diff -r 4baea2cb67f2 trytond/trytond/modules/stock/move.py
--- a/trytond/trytond/modules/stock/move.py	Mon Jul 17 10:51:41 2017 +0200
+++ b/trytond/trytond/modules/stock/move.py	Mon Jul 17 10:52:03 2017 +0200
@@ -28,7 +28,7 @@
 }
 DEPENDS = ['state']
 LOCATION_DOMAIN = [
-    If(Eval('state').in_(['staging', 'draft']),
+    If(Eval('state').in_(['staging', 'draft', 'cancel']),
         ('type', 'not in', ['warehouse']),
         ('type', 'not in', ['warehouse', 'view'])),
     ]
