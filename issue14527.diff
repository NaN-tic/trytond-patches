diff --git a/sao/src/common.js b/sao/src/common.js
index 5b605ac1dc43f0e59bc3d0867c2efc152b1be829_c2FvL3NyYy9jb21tb24uanM=..51904e9be85c2bbd381e72df8c6b5735523667b7_c2FvL3NyYy9jb21tb24uanM= 100644
--- a/sao/src/common.js
+++ b/sao/src/common.js
@@ -79,9 +79,19 @@
     };
 
     Sao.common.scrollIntoViewIfNeeded = function(element) {
-        element = element[0];
-        if (element) {
-            var rect = element.getBoundingClientRect();
-            if (rect.bottom > window.innerHeight) {
-                element.scrollIntoView(false);
+        function isScrollable(el) {
+            let style = getComputedStyle(el);
+            return /(auto|scroll|overlay)/.test(
+                style.overflow + style.overflowY + style.overflowX
+            );
+        }
+
+        function getScrollableAncestors(el) {
+            let ancestors = [];
+            let parent = el.parentElement;
+            while (parent && parent !== document.body) {
+                if (isScrollable(parent)) {
+                    ancestors.push(parent);
+                }
+                parent = parent.parentElement;
             }
@@ -87,5 +97,31 @@
             }
-            if (rect.top < 0) {
-                element.scrollIntoView();
+            ancestors.push(window);
+            return ancestors;
+        }
+
+        function scrollIntoViewWithin(el, container) {
+            let rect = el.getBoundingClientRect();
+
+            if (container === window) {
+                if (rect.top < 0 || rect.bottom > window.innerHeight) {
+                    el.scrollIntoView({
+                        block: 'center',
+                    });
+                }
+            } else {
+                let container_rect = container.getBoundingClientRect();
+                let top_ = rect.top - container_rect.top;
+                let bottom = top_ + rect.height;
+
+                let target_top = container.scrollTop;
+
+                if (top_ < 0) {
+                    target_top += top_ - container.clientHeight / 2;
+                } else if (bottom > container.clientHeight) {
+                    target_top += bottom - container.clientHeight / 2
+                }
+                container.scrollTo({
+                    top: Math.max(0, target_top),
+                });
             }
         }
@@ -90,5 +126,12 @@
             }
         }
+
+        element.each(function() {
+            let ancestors = getScrollableAncestors(this);
+            for (let ancestor of ancestors) {
+                scrollIntoViewWithin(this, ancestor);
+            }
+        });
     };
 
     // Handle click and Return press event
