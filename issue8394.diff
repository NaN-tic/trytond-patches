diff -r c845701bdb19 trytond/trytond/modules/stock_lot_sled/stock.py
--- a/trytond/trytond/modules/stock_lot_sled/stock.py	Thu Jun 06 00:13:21 2019 +0200
+++ b/trytond/trytond/modules/stock_lot_sled/stock.py	Thu Jun 06 00:22:10 2019 +0200
@@ -299,9 +299,13 @@
             for sub_query in find_queries(union):
                 lot = Lot.__table__()
                 if add_join(sub_query.from_, lot):
-                    sub_query.where &= (
+                    sub_where = (
                         (lot.shelf_life_expiration_date == Null)
                         | (lot.shelf_life_expiration_date >= expiration_date))
+                    if sub_query.where:
+                        sub_query.where &= sub_where
+                    else:
+                        sub_query.where = sub_where

             stock_date_start = context.get('stock_date_start')
             if stock_date_start:
@@ -316,11 +320,15 @@
                         lot = Lot.__table__()
                         if add_join(sub_query.from_, lot):
                             # only lot expiring during the period
-                            sub_query.where &= (
+                            sub_where = (
                                 (lot.shelf_life_expiration_date >=
                                     stock_date_start)
                                 & (lot.shelf_life_expiration_date <
                                     stock_date_end))
+                            if sub_query.where:
+                                sub_query.where &= sub_where
+                            else:
+                                sub_query.where = sub_where
                         # Inverse quantity
                         for column in sub_query._columns:
                             if (isinstance(column, As)
